<!DOCTYPE html><html lang="en"><head>
  <meta charset="utf-8">
  <title>SaltStack Vagrant Part 1</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="fb:app_id" content="1678943848891569">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="icon" href="/favicon.ico">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-47309606-3"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async=""></script>
  <!-- <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-47309606-3');
  </script> -->
<link rel="stylesheet" href="styles.3f8cb07efeb267c92829.css"><style ng-transition="le-liam">h1[_ngcontent-sc0] {
  font-size: 1.2em;
  color: #999;
  margin-bottom: 0;
}
h2[_ngcontent-sc0] {
  font-size: 2em;
  margin-top: 0;
  padding-top: 0;
}
nav[_ngcontent-sc0]   a[_ngcontent-sc0] {
  padding: 5px 10px;
  text-decoration: none;
  margin-top: 10px;
  display: inline-block;
  background-color: #eee;
  border-radius: 4px;
}
nav[_ngcontent-sc0]   a[_ngcontent-sc0]:visited, a[_ngcontent-sc0]:link {
  color: #607D8B;
}
nav[_ngcontent-sc0]   a[_ngcontent-sc0]:hover {
  color: #039be5;
  background-color: #CFD8DC;
}
nav[_ngcontent-sc0]   a.active[_ngcontent-sc0] {
  color: #039be5;
}
body[_ngcontent-sc0] {
  height: 100%;
}</style><style ng-transition="le-liam">.toolbar-fill-remaining-space[_ngcontent-sc1] {
  
  -ms-flex: 1 1 auto;
      flex: 1 1 auto;
}
a[_ngcontent-sc1] {
  text-decoration: none;
}</style><style ng-transition="le-liam"></style><style ng-transition="le-liam">@media screen and (-ms-high-contrast:active){.mat-toolbar{outline:solid 1px}}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}</style><style ng-transition="le-liam">.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button[disabled]{box-shadow:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-fab::-moz-focus-inner{border:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-fab[disabled]{box-shadow:none}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:1}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-mini-fab[disabled]{box-shadow:none}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}</style><style ng-transition="le-liam">.blogpost-inner[_ngcontent-sc19]     img {
  max-width: 100%
}
.banner-img[_ngcontent-sc19] {
  -o-object-fit: contain;
     object-fit: contain;
}
.td-avatar[_ngcontent-sc19] {
  padding-right: 10px;
}
.avatar-small[_ngcontent-sc19] {
  height: 40px;
  width: 40px;
  border-radius: 50%;
  -ms-flex-negative: 0;
      flex-shrink: 0;
}
mat-chip-list[_ngcontent-sc19]   a[_ngcontent-sc19] {
  margin-right: 5px;
}
.banner-image-container[_ngcontent-sc19] {
  text-align: center;
}
.banner-image-container[_ngcontent-sc19]   img[_ngcontent-sc19] {
  max-width: 100%;
  max-height: 300px;
}</style><style ng-transition="le-liam">.mat-chip{position:relative;overflow:hidden;box-sizing:border-box}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:inline-flex;padding:7px 12px;border-radius:24px;align-items:center;cursor:default}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip:focus{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);outline:0}@media screen and (-ms-high-contrast:active){.mat-standard-chip{outline:solid 1px}}.mat-standard-chip.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:7px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:7px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:7px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:7px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:32px;height:32px;margin-right:8px;margin-left:0}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:0}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:7px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:7px;margin-left:0}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper .mat-standard-chip,.mat-chip-list-wrapper input.mat-input-element{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden}input.mat-chip-input{width:150px;margin:3px;flex:1 0 150px}</style></head>
<body>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0&appId=1678943848891569&autoLogAppEvents=1';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
  <app-root _nghost-sc0="" ng-version="6.0.4"><div _ngcontent-sc0="" class="mat-typography"><app-nav _ngcontent-sc0="" _nghost-sc1=""><div _ngcontent-sc1="" class="mat-typography"><!----><div _ngcontent-sc1=""><mat-toolbar _ngcontent-sc1="" class="mat-toolbar mat-toolbar-single-row"><a _ngcontent-sc1="" approuterlink="/" mat-button="" class="mat-button _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/"><span class="mat-button-wrapper"><h3 _ngcontent-sc1="">Le Liam</h3></span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc1="" approuterlink="/" approuterlinkactive="mat-primary" mat-button="" class="mat-button _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/"><span class="mat-button-wrapper">Home</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc1="" approuterlink="/tags" approuterlinkactive="mat-primary" mat-button="" class="mat-button _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/tags"><span class="mat-button-wrapper">Tags</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc1="" approuterlink="/blogposts" approuterlinkactive="mat-primary" mat-button="" class="mat-button _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/blogposts"><span class="mat-button-wrapper">Blogposts</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc1="" approuterlink="/contact" approuterlinkactive="mat-primary" mat-button="" class="mat-button _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/contact"><span class="mat-button-wrapper">Contact</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a></mat-toolbar></div><!----><!----></div></app-nav><app-status-bar _ngcontent-sc0="" _nghost-sc2=""><!----></app-status-bar><router-outlet _ngcontent-sc0=""></router-outlet><app-blogpost _nghost-sc19=""><!----><!----><!----><div _ngcontent-sc19=""><!----><div _ngcontent-sc19=""><div _ngcontent-sc19="" class="main-bg" style="padding-bottom:20px"><div _ngcontent-sc19="" class="container"><br _ngcontent-sc19=""><table _ngcontent-sc19=""><tbody _ngcontent-sc19=""><tr _ngcontent-sc19=""><td _ngcontent-sc19="" class="td-avatar" rowspan="2"><div _ngcontent-sc19="" class="avatar-small" style="background-image:url('/assets/32x32_avatar.jpg');background-size:cover;"></div></td><td _ngcontent-sc19="">Liam</td></tr><tr _ngcontent-sc19=""><td _ngcontent-sc19="" style="color:rgba(0,0,0,.54)"><small _ngcontent-sc19="">Jan 16, 2016</small></td></tr></tbody></table><div _ngcontent-sc19="" class="banner-image-container"><!----><img _ngcontent-sc19="" src="/assets/2016011600.png"></div><br _ngcontent-sc19=""><h1 _ngcontent-sc19=""> SaltStack Vagrant Part 1 </h1><div _ngcontent-sc19="" class="blogpost-inner"><h2>What is SaltStack</h2>
<ul>
<li>SaltStack software orchestrates the build and ongoing management of any modern infrastructure.</li>
<li>SaltStack is also the most scalable and flexible configuration management software for event-driven automation of CloudOps, ITOps and DevOps.</li>
<li>SaltStack is one of the top configuration management framework among Chef, Puppet, Ansible and SaltStack.</li>
</ul>
<h2>Why SaltStack with Vagrant</h2>
<ul>
<li>Salt execution routines can be written as plain Python modules. (I am the Python guy)</li>
<li>SaltStack script for Vagrant will be mostly same for the cloud server
<ul>
<li>Achievement <code>development server == production server</code> Unlocked</li>
</ul>
</li>
</ul>
<h2>Vagrant Folder Structure</h2>
<pre class="hljs"><code>- salt/
  - root/
    - top.sls
    - webserver.sls
  - minion
- Vagrantfile
</code></pre>
<h2>Vagrantfile Setup</h2>
<pre class="hljs"><code>Vagrant.configure(<span class="hljs-string">"2"</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|config|</span>

    <span class="hljs-comment"># load up the box for centos 6.6</span>
    <span class="hljs-comment"># This will take long to download the os, hold up there</span>
    <span class="hljs-comment"># Or go for a coffee</span>
        config.vm.box = <span class="hljs-string">"CentOS_7_x64"</span>
    <span class="hljs-comment">## For masterless, mount your salt file root</span>
    config.vm.synced_folder <span class="hljs-string">"salt/root/"</span>, <span class="hljs-string">"/srv/salt/"</span>
    config.vm.network <span class="hljs-string">"private_network"</span>, <span class="hljs-symbol">ip:</span> <span class="hljs-string">"10.0.0.201"</span>

    <span class="hljs-comment">## Use all the defaults:</span>
    config.vm.provision <span class="hljs-symbol">:salt</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|salt|</span>
        salt.bootstrap_options = <span class="hljs-string">"-P -c /tmp"</span> <span class="hljs-comment"># to salve minion_config not copied issue</span>
        salt.masterless = <span class="hljs-literal">true</span>
        salt.minion_config = <span class="hljs-string">"salt/minion"</span>
        salt.run_highstate = <span class="hljs-literal">true</span>

    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2>top.sls</h2>
<pre class="hljs"><code><span class="hljs-symbol">base:</span>
  <span class="hljs-string">'*'</span>:
    - webserver
</code></pre>
<h2>webserver.sls</h2>
<pre class="hljs"><code><span class="hljs-symbol">httpd:</span>               <span class="hljs-comment"># ID declaration</span>
  <span class="hljs-symbol">pkg:</span>                <span class="hljs-comment"># state declaration</span>
    - installed       <span class="hljs-comment"># function declaration</span>
  service.<span class="hljs-symbol">running:</span>
    - <span class="hljs-symbol">enable:</span> True
    - <span class="hljs-symbol">require:</span>
        - <span class="hljs-symbol">pkg:</span> httpd
</code></pre>
<h2>minion</h2>
<pre class="hljs"><code><span class="hljs-symbol">file_client:</span> local
</code></pre>
<h2>Ending</h2>
<p>Run <code>vagrant up</code> you should get a CentOS_7_x64 box with httpd server installed!</p>
<p>By the end of this article, you should know the basic of how salt work.</p>
</div><mat-chip-list _ngcontent-sc19="" class="mat-chip-list" style="margin-top: 5px" tabindex="-1" aria-required="false" aria-disabled="false" aria-invalid="false" aria-multiselectable="false" aria-orientation="horizontal" id="mat-chip-list-19"><div class="mat-chip-list-wrapper"><!----><a _ngcontent-sc19="" color="accent" mat-stroked-button="" class="mat-stroked-button mat-accent _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/tag/salt"><span class="mat-button-wrapper">salt</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc19="" color="accent" mat-stroked-button="" class="mat-stroked-button mat-accent _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/tag/configuration-management"><span class="mat-button-wrapper">configuration-management</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a><a _ngcontent-sc19="" color="accent" mat-stroked-button="" class="mat-stroked-button mat-accent _mat-animation-noopable" tabindex="0" aria-disabled="false" href="/tag/vagrant"><span class="mat-button-wrapper">vagrant</span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></a></div></mat-chip-list></div></div><div _ngcontent-sc19="" class="container" style="padding-top:20px"><h2 _ngcontent-sc19="">Comments</h2><div _ngcontent-sc19=""></div></div></div></div></app-blogpost></div><!----></app-root>
<script type="text/javascript" src="runtime.6afe30102d8fe7337431.js"></script><script type="text/javascript" src="polyfills.1024cb7b58fe3e68344f.js"></script><script type="text/javascript" src="main.1eaf2d0d86910b2f0590.js"></script>

<div class="cdk-visually-hidden" aria-atomic="true" aria-live="polite"></div><script id="le-liam-state" type="application/json">{&q;blogpost&q;:{&q;author&q;:{&q;avatar&q;:&q;/assets/32x32_avatar.jpg&q;,&q;name&q;:&q;Liam&q;,&q;tagline&q;:&q;Make people great again!&q;},&q;data&q;:&q;\n## What is SaltStack\n- SaltStack software orchestrates the build and ongoing management of any modern infrastructure.\n- SaltStack is also the most scalable and flexible configuration management software for event-driven automation of CloudOps, ITOps and DevOps.\n- SaltStack is one of the top configuration management framework among Chef, Puppet, Ansible and SaltStack.\n\n## Why SaltStack with Vagrant\n- Salt execution routines can be written as plain Python modules. (I am the Python guy)\n- SaltStack script for Vagrant will be mostly same for the cloud server\n    - Achievement `development server == production server` Unlocked\n\n## Vagrant Folder Structure\n~~~\n- salt/\n  - root/\n    - top.sls\n    - webserver.sls\n  - minion\n- Vagrantfile\n~~~\n\n## Vagrantfile Setup\n~~~ ruby\nVagrant.configure(\&q;2\&q;) do |config|\n\n    # load up the box for centos 6.6\n    # This will take long to download the os, hold up there\n    # Or go for a coffee\n        config.vm.box = \&q;CentOS_7_x64\&q;\n    ## For masterless, mount your salt file root\n    config.vm.synced_folder \&q;salt/root/\&q;, \&q;/srv/salt/\&q;\n    config.vm.network \&q;private_network\&q;, ip: \&q;10.0.0.201\&q;\n\n    ## Use all the defaults:\n    config.vm.provision :salt do |salt|\n        salt.bootstrap_options = \&q;-P -c /tmp\&q; # to salve minion_config not copied issue\n        salt.masterless = true\n        salt.minion_config = \&q;salt/minion\&q;\n        salt.run_highstate = true\n\n    end\nend\n~~~\n\n## top.sls\n~~~ ruby\nbase:\n  &s;*&s;:\n    - webserver\n~~~\n\n## webserver.sls\n~~~ ruby\nhttpd:               # ID declaration\n  pkg:                # state declaration\n    - installed       # function declaration\n  service.running:\n    - enable: True\n    - require:\n        - pkg: httpd\n~~~\n\n## minion\n~~~ ruby\nfile_client: local\n~~~\n\n## Ending\nRun `vagrant up` you should get a CentOS_7_x64 box with httpd server installed!\n\nBy the end of this article, you should know the basic of how salt work.\n    &q;,&q;id&q;:&q;0f2cdba8-8900-49f8-9666-98fd40eddfe7&q;,&q;bannerUrl&q;:&q;/assets/2016011600.png&q;,&q;coverUrl&q;:&q;/assets/2016011600.png&q;,&q;postedAt&q;:&q;2016-01-15T16:00:00.000Z&q;,&q;tags&q;:[&q;salt&q;,&q;configuration-management&q;,&q;vagrant&q;],&q;title&q;:&q;SaltStack Vagrant Part 1&q;,&q;typeCode&q;:1},&q;blogHtml&q;:&q;&l;h2&g;What is SaltStack&l;/h2&g;\n&l;ul&g;\n&l;li&g;SaltStack software orchestrates the build and ongoing management of any modern infrastructure.&l;/li&g;\n&l;li&g;SaltStack is also the most scalable and flexible configuration management software for event-driven automation of CloudOps, ITOps and DevOps.&l;/li&g;\n&l;li&g;SaltStack is one of the top configuration management framework among Chef, Puppet, Ansible and SaltStack.&l;/li&g;\n&l;/ul&g;\n&l;h2&g;Why SaltStack with Vagrant&l;/h2&g;\n&l;ul&g;\n&l;li&g;Salt execution routines can be written as plain Python modules. (I am the Python guy)&l;/li&g;\n&l;li&g;SaltStack script for Vagrant will be mostly same for the cloud server\n&l;ul&g;\n&l;li&g;Achievement &l;code&g;development server == production server&l;/code&g; Unlocked&l;/li&g;\n&l;/ul&g;\n&l;/li&g;\n&l;/ul&g;\n&l;h2&g;Vagrant Folder Structure&l;/h2&g;\n&l;pre class=\&q;hljs\&q;&g;&l;code&g;- salt/\n  - root/\n    - top.sls\n    - webserver.sls\n  - minion\n- Vagrantfile\n&l;/code&g;&l;/pre&g;\n&l;h2&g;Vagrantfile Setup&l;/h2&g;\n&l;pre class=\&q;hljs\&q;&g;&l;code&g;Vagrant.configure(&l;span class=\&q;hljs-string\&q;&g;\&q;2\&q;&l;/span&g;) &l;span class=\&q;hljs-keyword\&q;&g;do&l;/span&g; &l;span class=\&q;hljs-params\&q;&g;|config|&l;/span&g;\n\n    &l;span class=\&q;hljs-comment\&q;&g;# load up the box for centos 6.6&l;/span&g;\n    &l;span class=\&q;hljs-comment\&q;&g;# This will take long to download the os, hold up there&l;/span&g;\n    &l;span class=\&q;hljs-comment\&q;&g;# Or go for a coffee&l;/span&g;\n        config.vm.box = &l;span class=\&q;hljs-string\&q;&g;\&q;CentOS_7_x64\&q;&l;/span&g;\n    &l;span class=\&q;hljs-comment\&q;&g;## For masterless, mount your salt file root&l;/span&g;\n    config.vm.synced_folder &l;span class=\&q;hljs-string\&q;&g;\&q;salt/root/\&q;&l;/span&g;, &l;span class=\&q;hljs-string\&q;&g;\&q;/srv/salt/\&q;&l;/span&g;\n    config.vm.network &l;span class=\&q;hljs-string\&q;&g;\&q;private_network\&q;&l;/span&g;, &l;span class=\&q;hljs-symbol\&q;&g;ip:&l;/span&g; &l;span class=\&q;hljs-string\&q;&g;\&q;10.0.0.201\&q;&l;/span&g;\n\n    &l;span class=\&q;hljs-comment\&q;&g;## Use all the defaults:&l;/span&g;\n    config.vm.provision &l;span class=\&q;hljs-symbol\&q;&g;:salt&l;/span&g; &l;span class=\&q;hljs-keyword\&q;&g;do&l;/span&g; &l;span class=\&q;hljs-params\&q;&g;|salt|&l;/span&g;\n        salt.bootstrap_options = &l;span class=\&q;hljs-string\&q;&g;\&q;-P -c /tmp\&q;&l;/span&g; &l;span class=\&q;hljs-comment\&q;&g;# to salve minion_config not copied issue&l;/span&g;\n        salt.masterless = &l;span class=\&q;hljs-literal\&q;&g;true&l;/span&g;\n        salt.minion_config = &l;span class=\&q;hljs-string\&q;&g;\&q;salt/minion\&q;&l;/span&g;\n        salt.run_highstate = &l;span class=\&q;hljs-literal\&q;&g;true&l;/span&g;\n\n    &l;span class=\&q;hljs-keyword\&q;&g;end&l;/span&g;\n&l;span class=\&q;hljs-keyword\&q;&g;end&l;/span&g;\n&l;/code&g;&l;/pre&g;\n&l;h2&g;top.sls&l;/h2&g;\n&l;pre class=\&q;hljs\&q;&g;&l;code&g;&l;span class=\&q;hljs-symbol\&q;&g;base:&l;/span&g;\n  &l;span class=\&q;hljs-string\&q;&g;&s;*&s;&l;/span&g;:\n    - webserver\n&l;/code&g;&l;/pre&g;\n&l;h2&g;webserver.sls&l;/h2&g;\n&l;pre class=\&q;hljs\&q;&g;&l;code&g;&l;span class=\&q;hljs-symbol\&q;&g;httpd:&l;/span&g;               &l;span class=\&q;hljs-comment\&q;&g;# ID declaration&l;/span&g;\n  &l;span class=\&q;hljs-symbol\&q;&g;pkg:&l;/span&g;                &l;span class=\&q;hljs-comment\&q;&g;# state declaration&l;/span&g;\n    - installed       &l;span class=\&q;hljs-comment\&q;&g;# function declaration&l;/span&g;\n  service.&l;span class=\&q;hljs-symbol\&q;&g;running:&l;/span&g;\n    - &l;span class=\&q;hljs-symbol\&q;&g;enable:&l;/span&g; True\n    - &l;span class=\&q;hljs-symbol\&q;&g;require:&l;/span&g;\n        - &l;span class=\&q;hljs-symbol\&q;&g;pkg:&l;/span&g; httpd\n&l;/code&g;&l;/pre&g;\n&l;h2&g;minion&l;/h2&g;\n&l;pre class=\&q;hljs\&q;&g;&l;code&g;&l;span class=\&q;hljs-symbol\&q;&g;file_client:&l;/span&g; local\n&l;/code&g;&l;/pre&g;\n&l;h2&g;Ending&l;/h2&g;\n&l;p&g;Run &l;code&g;vagrant up&l;/code&g; you should get a CentOS_7_x64 box with httpd server installed!&l;/p&g;\n&l;p&g;By the end of this article, you should know the basic of how salt work.&l;/p&g;\n&q;,&q;showType&q;:3,&q;errorMessage&q;:&q;&q;}</script></body></html>