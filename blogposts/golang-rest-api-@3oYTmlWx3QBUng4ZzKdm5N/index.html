<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=css/global.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.ico rel=icon type=image/png> <link href=client/main.963202101.css rel=stylesheet><link href=client/[slug].0a9a6706.css rel=stylesheet><link href=client/app.9ed08d90.css rel=stylesheet><link href=client/Nav.036c21e8.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Golang Rest API</title> <meta content="Author: Liam, Date: 20 Feb, 2016\n We will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.
Note that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.
" name=description> <meta content=article name=og:type> <meta content=https://leliam.com/blogposts/golang-rest-api-@3oYTmlWx3QBUng4ZzKdm5N name=og:url> <meta content="Golang Rest API" name=og:title> <meta content="We will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.\nNote that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.\n" name=og:description><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <div style="min-height:calc(100vh - 48px)"> <nav aria-label="main navigation" class="svelte-1dif8ux navbar" role=navigation> <div class=navbar-brand> <a href=/ class="svelte-1dif8ux navbar-item" style=margin:5px><div class="is-4 subtitle">Le Liam</div></a> <a href=/ class="svelte-1dif8ux navbar-item">Home</a> <a href=/tags class="svelte-1dif8ux navbar-item">Tags</a> <a href=/blogposts class="svelte-1dif8ux navbar-item is-active">Blogposts</a> <a href=/contact class="svelte-1dif8ux navbar-item">Contact</a> </div> </nav> <main> <div class="container is-fluid"> <div class=media style="margin:25px 0"> <div class=media-left> <figure class="image is-48x48"> <img alt="Author avatar" loading=lazy src=/assets/32x32_avatar.jpg class=is-rounded> </figure> </div> <div class=media-content> <p class="is-4 title">Liam</p> <p class="subtitle is-6">20 Feb, 2016</p> </div> </div> <div style="margin:0 0 25px"> <img alt="blogpost banner" loading=lazy src=/assets/2016022000.png style="margin:0 auto;display:block;max-height:256px"> </div> <h3 class=title>Golang Rest API</h3> <div class="content svelte-nn94v0"> <h2>Installation on Golang</h2> <p>We will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.</p> <p>Note that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.</p> <pre class=hljs><code>bash &lt; &lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)
gvm install go1.4
gvm use go1.4
gvm install go1.6
gvm use go1.6 --default
</code></pre> <h2>Gin-Gonic/Gin</h2> <p>Gin is a web framework written in Go (Golang). It features a martini-like API with much better performance, up to 40 times faster thanks to httprouter. If you need performance and good productivity, you will love Gin.</p> <pre class=hljs><code>go get github.com/gin-gonic/gin
</code></pre> <pre class=hljs><code>#~/golang/server.<span class=hljs-keyword>go</span>
<span class=hljs-keyword>package</span> main

<span class=hljs-keyword>import</span> <span class=hljs-string>"github.com/gin-gonic/gin"</span>

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-title>main</span><span class=hljs-params>()</span></span> {
    r := gin.Default()
    r.GET(<span class=hljs-string>"/ping"</span>, <span class=hljs-function><span class=hljs-keyword>func</span><span class=hljs-params>(c *gin.Context)</span></span> {
        c.JSON(<span class=hljs-number>200</span>, gin.H{
            <span class=hljs-string>"message"</span>: <span class=hljs-string>"pong"</span>,
        })
    })
    r.Run() <span class=hljs-comment>// listen and server on 0.0.0.0:8080</span>
}
</code></pre> <p>and execute it with <code>go run server.go</code>, access localhost:8080/ping and you should be able to see <code>{"message":"pong"}</code></p> <h2>Live Reloading with codegangsta/gin</h2> <p>However for development, it is important to have compile on files changed function. There is a package there for go. Note that do not start any app on proxy port that is used by gin (default 3000) and the application port.</p> <p>Running below code will autostart the go app.</p> <pre class=hljs><code>go get github.com/codegangsta/gin
<span class=hljs-built_in>cd</span> ~/golang/
gin -i -a 8080
</code></pre> <p>now change the code without terminating gin</p> <pre class=hljs><code><span class=hljs-comment>#~/golang/server.go</span>
package main

import <span class=hljs-string>"github.com/gin-gonic/gin"</span>

func <span class=hljs-function><span class=hljs-title>main</span></span>() {
    r := gin.Default()
    r.GET(<span class=hljs-string>"/ping"</span>, func(c *gin.Context) {
        c.JSON(200, gin.H{
            <span class=hljs-string>"message"</span>: <span class=hljs-string>"pong pong"</span>,
        })
    })
    r.Run() // listen and server on 0.0.0.0:8080
}
</code></pre> <p>access to localhost:8080/ping and you should be able to see <code>{"message":"pong pong"}</code></p> <h2>This is It</h2> <p>With this, we have successfully setup a simple golang rest api server. Golang is a promising solution to give both near C performance + dynamic language development speed + goroutine.</p> </div> </div> </main> </div> <footer style=height:48px;padding:10px> <div class="content has-text-centered"> <a href=/privacy-policy>privacy policy</a> · ©2018-2020 Le Liam · <a href=/terms-of-service>TOS</a> </div> </footer></div> <script crossorigin=anonymous src="https://polyfill.io/v3/polyfill.min.js?features=fetch%2CPromise"></script> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{slug:"golang-rest-api-@3oYTmlWx3QBUng4ZzKdm5N",title:"Golang Rest API",description:"\u003Cp\u003EWe will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.\u003C\u002Fp\u003E\n\u003Cp\u003ENote that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.\u003C\u002Fp\u003E\n",banner:"\u002Fassets\u002F2016022000.png",author:{avatar:"\u002Fassets\u002F32x32_avatar.jpg",name:"Liam"},data:"\u003Ch2\u003EInstallation on Golang\u003C\u002Fh2\u003E\n\u003Cp\u003EWe will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.\u003C\u002Fp\u003E\n\u003Cp\u003ENote that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003Ebash &lt; &lt;(curl -s -S -L https:\u002F\u002Fraw.githubusercontent.com\u002Fmoovweb\u002Fgvm\u002Fmaster\u002Fbinscripts\u002Fgvm-installer)\ngvm install go1.4\ngvm use go1.4\ngvm install go1.6\ngvm use go1.6 --default\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2\u003EGin-Gonic\u002FGin\u003C\u002Fh2\u003E\n\u003Cp\u003EGin is a web framework written in Go (Golang). It features a martini-like API with much better performance, up to 40 times faster thanks to httprouter. If you need performance and good productivity, you will love Gin.\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003Ego get github.com\u002Fgin-gonic\u002Fgin\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E#~\u002Fgolang\u002Fserver.\u003Cspan class=\"hljs-keyword\"\u003Ego\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Epackage\u003C\u002Fspan\u003E main\n\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"github.com\u002Fgin-gonic\u002Fgin\"\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n    r := gin.Default()\n    r.GET(\u003Cspan class=\"hljs-string\"\u003E\"\u002Fping\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(c *gin.Context)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n        c.JSON(\u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E, gin.H{\n            \u003Cspan class=\"hljs-string\"\u003E\"message\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E\"pong\"\u003C\u002Fspan\u003E,\n        })\n    })\n    r.Run() \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F listen and server on 0.0.0.0:8080\u003C\u002Fspan\u003E\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eand execute it with \u003Ccode\u003Ego run server.go\u003C\u002Fcode\u003E, access localhost:8080\u002Fping and you should be able to see \u003Ccode\u003E{&quot;message&quot;:&quot;pong&quot;}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch2\u003ELive Reloading with codegangsta\u002Fgin\u003C\u002Fh2\u003E\n\u003Cp\u003EHowever for development, it is important to have compile on files changed function. There is a package there for go. Note that do not start any app on proxy port that is used by gin (default 3000) and the application port.\u003C\u002Fp\u003E\n\u003Cp\u003ERunning below code will autostart the go app.\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003Ego get github.com\u002Fcodegangsta\u002Fgin\n\u003Cspan class=\"hljs-built_in\"\u003Ecd\u003C\u002Fspan\u003E ~\u002Fgolang\u002F\ngin -i -a 8080\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Enow change the code without terminating gin\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-comment\"\u003E#~\u002Fgolang\u002Fserver.go\u003C\u002Fspan\u003E\npackage main\n\nimport \u003Cspan class=\"hljs-string\"\u003E\"github.com\u002Fgin-gonic\u002Fgin\"\u003C\u002Fspan\u003E\n\nfunc \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E() {\n    r := gin.Default()\n    r.GET(\u003Cspan class=\"hljs-string\"\u003E\"\u002Fping\"\u003C\u002Fspan\u003E, func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            \u003Cspan class=\"hljs-string\"\u003E\"message\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E\"pong pong\"\u003C\u002Fspan\u003E,\n        })\n    })\n    r.Run() \u002F\u002F listen and server on 0.0.0.0:8080\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eaccess to localhost:8080\u002Fping and you should be able to see \u003Ccode\u003E{&quot;message&quot;:&quot;pong pong&quot;}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch2\u003EThis is It\u003C\u002Fh2\u003E\n\u003Cp\u003EWith this, we have successfully setup a simple golang rest api server. Golang is a promising solution to give both near C performance + dynamic language development speed + goroutine.\u003C\u002Fp\u003E\n",postedAt:"20 Feb, 2016",metaDescription:"We will use gvm to install go for the current user. Note that we need to use go1.4 to compile go1.5 because go1.5 use go itself as compiler, therefore it need to have go installed.\nNote that gvm is mainly for development use, IMHO using tar install or docker is a better way for production server.\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.cdf9a2a3.js"}catch(e){main="/client/legacy/client.39bf6857.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script> function trim(text, val) {
		return text.replace(new RegExp('^'+val+'+|'+val+'+$','g'), '');
	}
	if (document.title === "Not Found") {
		let paths = trim(window.location.pathname, "/").split("-@");
		if (paths.length > 1) {
			fetch(`/blogposts/shortener-${paths[paths.length - 1]}.json`)
			.then((data) => {
				return data.json()
			})
			.then((data) => {
				window.location.replace(`/blogposts/${data.slug}`);
			})
			.catch((err) => {
				console.log(err);
			})
		}
	} </script> 